# 🚀 快速开始指南

通过此全面指南，几分钟内快速启动和运行 Opitios Alpaca 交易服务。

## 前置要求

- Python 3.8 或更高版本
- Git（用于克隆仓库）
- Alpaca Markets 账户（免费注册）

## 步骤 1：获取 Alpaca API 密钥

1. 访问 [Alpaca Markets 控制台](https://app.alpaca.markets/)
2. 创建账户或登录
3. 在控制台中导航到"API Keys"
4. 生成新的 API 密钥对（密钥 + 密钥）
5. 复制 API 密钥和密钥

> **💡 提示**：请安全保管您的 API 密钥，切勿提交到版本控制系统。

## 步骤 2：克隆和设置项目

```bash
# 克隆仓库（如果尚未完成）
git clone <repository-url>
cd opitios_alpaca

# 激活虚拟环境（根据 CLAUDE.md 要求为关键要求）
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac

# 安装依赖
pip install -r requirements.txt
```

> **⚠️ 关键**：始终为 Python 项目使用虚拟环境。这是 CLAUDE.md 要求的强制性要求。

## 步骤 3：配置您的 API 密钥

创建或更新 `.env` 文件，使用您的实际 API 密钥：

```env
ALPACA_API_KEY=PKEIKZWFXA4BD1JMJAY3
ALPACA_SECRET_KEY=your_actual_secret_key_here
ALPACA_BASE_URL=https://paper-api.alpaca.markets
ALPACA_PAPER_TRADING=true
HOST=0.0.0.0
PORT=8081
DEBUG=true
```

> **⚠️ 重要**：将 `your_actual_secret_key_here` 替换为您的真实 Alpaca 密钥。

## 步骤 4：验证您的设置

运行交互式设置验证脚本：

```bash
python docs/scripts/setup_validator.py
```

或运行基本测试套件：

```bash
python test_app.py
```

**预期输出：**
- ✅ FastAPI 端点正常工作（200 状态码）
- ✅ 应用程序结构功能正常
- ✅ 使用有效的 API 密钥，您还将看到成功的 API 调用

## 步骤 5：启动服务器

```bash
# 启动开发服务器
python main.py

# 替代方案：直接使用 uvicorn 命令
uvicorn main:app --host 0.0.0.0 --port 8081 --reload
```

**服务器将在以下地址启动**：http://localhost:8081

**成功指标：**
```
INFO:     Started server process [12345]
INFO:     Waiting for application startup.
INFO:     Starting Opitios Alpaca Trading Service
INFO:     Paper trading mode: True
INFO:     Alpaca base URL: https://paper-api.alpaca.markets
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8081 (Press CTRL+C to quit)
```

## 步骤 6：验证安装

### 访问 API 文档
- **交互式 API 文档**：http://localhost:8081/docs
- **替代文档**：http://localhost:8081/redoc
- **服务信息**：http://localhost:8081/

### 测试核心端点

1. **健康检查**：
   ```bash
   curl http://localhost:8081/api/v1/health
   ```
   
   预期结果：`{"status": "healthy", "service": "Opitios Alpaca Trading Service"}`

2. **账户信息**：
   ```bash
   curl http://localhost:8081/api/v1/account
   ```
   
   预期结果：带有购买力、现金等的账户详情

3. **股票报价**：
   ```bash
   curl http://localhost:8081/api/v1/stocks/AAPL/quote
   ```
   
   预期结果：实时 AAPL 股票报价数据

## 步骤 7：测试交易（模拟交易）

尝试一个简单的模拟交易交易：

```bash
# 以市价购买 1 股 AAPL
curl -X POST "http://localhost:8081/api/v1/stocks/AAPL/buy?qty=1"

# 下限价订单
curl -X POST "http://localhost:8081/api/v1/stocks/order" \
     -H "Content-Type: application/json" \
     -d '{
       "symbol": "AAPL",
       "qty": 1,
       "side": "buy",
       "type": "limit",
       "limit_price": 150.00,
       "time_in_force": "day"
     }'
```

## ✅ 验证清单

完成设置后，验证这些项目：

- [ ] **环境**：虚拟环境已激活
- [ ] **依赖**：所有包成功安装
- [ ] **配置**：API 密钥在 `.env` 中配置
- [ ] **服务器**：服务无错误启动
- [ ] **API 文档**：交互式文档可访问
- [ ] **健康检查**：`/api/v1/health` 返回成功
- [ ] **账户访问**：`/api/v1/account` 返回账户数据
- [ ] **市场数据**：股票报价正常工作
- [ ] **交易**：模拟交易订单成功执行

## 🎯 成功！您已准备好交易

您的 Opitios Alpaca 交易服务现在已完全功能，具有：

- ✅ **股票交易**：使用市价、限价和止损订单买卖股票
- ✅ **市场数据**：实时报价和历史价格条
- ✅ **投资组合管理**：账户信息、头寸和订单管理
- ✅ **模拟交易**：安全的测试环境
- ✅ **API 文档**：完整的端点文档
- ✅ **测试套件**：全面的测试覆盖

## 下一步

1. **探索 API**：访问 http://localhost:8081/docs 获取完整的 API 参考
2. **查看示例**：查看 [API 使用示例](API使用示例.md) 了解详细用法
3. **生产设置**：参见 [系统架构](系统架构.md) 了解生产部署
4. **故障排除**：如果出现问题，请参见 [故障排除指南](故障排除指南.md)

## 需要帮助？

- **设置问题**：运行 `python docs/scripts/setup_validator.py`
- **API 问题**：查看 [API 使用示例](API使用示例.md)
- **错误解决**：参见 [故障排除指南](故障排除指南.md)
- **配置**：使用 `python docs/scripts/config_helper.py`

---

**设置时间**：约 5-10 分钟  
**难度**：初学者友好  
**下一步**：[API 使用示例](API使用示例.md)